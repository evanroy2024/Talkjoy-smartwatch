{% extends 'base.html' %}
{% load static %}
{% block title %}Search Results{% endblock %}

{% block content %}

  <!--
    - favicon
  -->
  <link rel="shortcut icon" href="./assets/images/logo/favicon.ico" type="image/x-icon">

  <!--
    - custom css link
  -->
<link rel="stylesheet" href="{% static 'css/style-prefix.css' %}">
<link rel="stylesheet" href="{% static 'css/style.css' %}">
  <!--
    - google font link
  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">


    <!--
      - CATEGORY
    -->

    <div class="category">

      <div class="container">

        <div class="category-item-container has-scrollbar">

          {% for category in categories %}
          <div class="category-item">

            <div class="category-img-box">
              {% if category.image %}
                <img src="{{ category.image.url }}" alt="{{ category.name }}" width="30">
              {% else %}
                <img src="{% static 'img/1.jpg' %}" alt="{{ category.name }}" width="30">
              {% endif %}
            </div>

            <div class="category-content-box">

              <div class="category-content-flex">
                <h3 class="category-item-title">{{ category.name }}</h3>

                <p class="category-item-amount">({{ category.products.count }})</p>
              </div>

              <a href="{% url 'category_filter' category.id %}" class="category-btn">Show all</a>

            </div>

          </div>
          {% endfor %}

        </div>

      </div>

    </div>

    <!--
      - SEARCH RESULTS
    -->

    <div class="product-container">

      <div class="container">

        <div class="product-box">

          <div class="product-main">

            {% if query %}
              <h2 class="title">Search Results for "{{ query }}" ({{ products.count }} found)</h2>
            {% else %}
              <h2 class="title">Search Products</h2>
              <p style="text-align: center; color: #666; padding: 20px;">Enter a search term above to find products</p>
            {% endif %}

            {% if query %}
            <div class="product-grid">

              {% for product in products %}
<a href="{% url 'product_detail' product.pk %}" style="text-decoration: none; color: inherit;">
    <div class="showcase">

        <div class="showcase-banner">
            <img src="{{ product.image.url }}" alt="{{ product.name }}" width="300" class="product-img default">
            <img src="{{ product.image.url }}" alt="{{ product.name }}" width="300" class="product-img hover">

            <p class="showcase-badge">{{ product.discount }}%</p>

            <div class="showcase-actions">
                <button class="btn-action">
                    <ion-icon name="heart-outline"></ion-icon>
                </button>
                <button class="btn-action">
                    <ion-icon name="eye-outline"></ion-icon>
                </button>
                <button class="btn-action">
                    <ion-icon name="repeat-outline"></ion-icon>
                </button>
                <button class="btn-action">
                    <ion-icon name="bag-add-outline"></ion-icon>
                </button>
            </div>
        </div>

        <div class="showcase-content">
            <span class="showcase-category">{{ product.main_category.name }}</span>
            <h3 class="showcase-title">{{ product.name }}</h3>

            <div class="showcase-rating">
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star-outline"></ion-icon>
                <ion-icon name="star-outline"></ion-icon>
            </div>

            <div class="price-box">
                <p class="price">${{ product.final_price }}</p>
                <del>${{ product.price }}</del>
            </div>
        </div>

    </div>
</a>
{% empty %}
<div style="text-align: center; padding: 50px;">
    <h3 style="color: #666;">No products found for "{{ query }}"</h3>
    <p style="color: #999;">Try searching with different keywords</p>
</div>
{% endfor %}

            </div>
            {% endif %}

          </div>

        </div>

      </div>

    </div>


<script src="{% static 'js/script.js' %}"></script>

  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>


{% endblock %}