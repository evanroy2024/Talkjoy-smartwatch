{% extends "base.html" %}
{% load static %}
{% block title %}Dashboard{% endblock %}

{% block content %} 
 
 <!-- Main Content -->
    <div id="mainContent" class="main-content">
        <!-- Header -->
        <div style="border-bottom: 1px solid #e5e7eb; padding: 1rem 1.5rem; background: #ffffff;">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <button id="openSidebar" class="mobile-menu-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#374151" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="3" y1="6" x2="21" y2="6"/>
                            <line x1="3" y1="12" x2="21" y2="12"/>
                            <line x1="3" y1="18" x2="21" y2="18"/>
                        </svg>
                    </button>
                    <div>
                        <h1 style="font-size: 1.5rem; font-weight: 700; color: #111827;">Dashboard</h1>
                        <p style="font-size: 0.875rem; color: #6b7280;">Monitor your workflows and system performance</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button style="padding: 0.5rem; border-radius: 0.5rem; background: none; border: none; color: #374151; cursor: pointer; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='#f3f4f6'" onmouseout="this.style.backgroundColor='transparent'">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
                        </svg>
                    </button>
                    <div style="position: relative;">
                        <button id="createBtn" class="btn-primary" style="display: flex; align-items: center; padding: 0.75rem 1rem; background: #2563eb; color: white; border: none; border-radius: 0.5rem; font-weight: 500; cursor: pointer; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='#1d4ed8'" onmouseout="this.style.backgroundColor='#2563eb'">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 0.5rem;">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            Create Workflow
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 0.5rem;">
                                <polyline points="6,9 12,15 18,9"/>
                            </svg>
                        </button>
                        <div id="createDropdown" class="dropdown-menu" style="position: absolute; top: 100%; right: 0; background: white; border: 1px solid #e5e7eb; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); padding: 0.5rem; min-width: 200px; z-index: 50; display: none;">
                            <a href="#" style="display: flex; align-items: center; padding: 0.75rem; color: #374151; text-decoration: none; border-radius: 0.375rem; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='#f3f4f6'" onmouseout="this.style.backgroundColor='transparent'">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 0.75rem;">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                    <polyline points="14,2 14,8 20,8"/>
                                    <line x1="12" y1="18" x2="12" y2="12"/>
                                    <line x1="9" y1="15" x2="15" y2="15"/>
                                </svg>
                                Blank Workflow
                            </a>
                            <a href="#" style="display: flex; align-items: center; padding: 0.75rem; color: #374151; text-decoration: none; border-radius: 0.375rem; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='#f3f4f6'" onmouseout="this.style.backgroundColor='transparent'">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 0.75rem;">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <path d="M8 8h8v8H8z"/>
                                    <path d="m8 8 8 8"/>
                                    <path d="m16 8-8 8"/>
                                </svg>
                                From Template
                            </a>
                            <a href="#" style="display: flex; align-items: center; padding: 0.75rem; color: #374151; text-decoration: none; border-radius: 0.375rem; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='#f3f4f6'" onmouseout="this.style.backgroundColor='transparent'">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 0.75rem;">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="7,10 12,15 17,10"/>
                                    <line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                                Import Workflow
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Cards -->
        <div style="padding: 1.5rem 1.5rem; background: #f9fafb; min-height: 100vh;">
            <div class="grid grid-cols-1 grid-cols-5" style="gap: 1rem; margin-bottom: 2rem;">
                <div class="stat-card" style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="metric-number" style="font-size: 2rem; font-weight: 700; color: #111827;">1,247</div>
                            <div style="font-size: 0.875rem; font-weight: 500; margin-top: 0.25rem; color: #374151;">Total Executions</div>
                            <div style="font-size: 0.75rem; margin-top: 0.25rem; color: #6b7280;">Last 30 days</div>
                        </div>
                        <div class="icon-container" style="background: rgba(16, 185, 129, 0.1); padding: 0.75rem; border-radius: 0.5rem;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="stat-card" style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="metric-number" style="font-size: 2rem; font-weight: 700; color: #111827;">23</div>
                            <div style="font-size: 0.875rem; font-weight: 500; margin-top: 0.25rem; color: #374151;">Failed Executions</div>
                            <div style="font-size: 0.75rem; margin-top: 0.25rem; color: #6b7280;">Last 30 days</div>
                        </div>
                        <div class="icon-container" style="background: rgba(239, 68, 68, 0.1); padding: 0.75rem; border-radius: 0.5rem;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="12" y1="8" x2="12" y2="12"/>
                                <line x1="12" y1="16" x2="12.01" y2="16"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="stat-card" style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="metric-number" style="font-size: 2rem; font-weight: 700; color: #111827;">98.2%</div>
                            <div style="font-size: 0.875rem; font-weight: 500; margin-top: 0.25rem; color: #374151;">Success Rate</div>
                            <div style="font-size: 0.75rem; margin-top: 0.25rem; color: #6b7280;">Last 30 days</div>
                        </div>
                        <div class="icon-container" style="background: rgba(16, 185, 129, 0.1); padding: 0.75rem; border-radius: 0.5rem;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="23,6 13.5,15.5 8.5,10.5 1,18"/>
                                <polyline points="17,6 23,6 23,12"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="stat-card" style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="metric-number" style="font-size: 2rem; font-weight: 700; color: #111827;">42h</div>
                            <div style="font-size: 0.875rem; font-weight: 500; margin-top: 0.25rem; color: #374151;">Time Saved</div>
                            <div style="font-size: 0.75rem; margin-top: 0.25rem; color: #6b7280;">Last 30 days</div>
                        </div>
                        <div class="icon-container" style="background: rgba(37, 99, 235, 0.1); padding: 0.75rem; border-radius: 0.5rem;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"/>
                                <polyline points="12,6 12,12 16,14"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="stat-card" style="background: white; padding: 1.5rem; border-radius: 0.75rem; border: 1px solid #e5e7eb; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="metric-number" style="font-size: 2rem; font-weight: 700; color: #111827;">2.3s</div>
                            <div style="font-size: 0.875rem; font-weight: 500; margin-top: 0.25rem; color: #374151;">Avg. Runtime</div>
                            <div style="font-size: 0.75rem; margin-top: 0.25rem; color: #6b7280;">Last 30 days</div>
                        </div>
                        <div class="icon-container" style="background: rgba(139, 92, 246, 0.1); padding: 0.75rem; border-radius: 0.5rem;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="13,2 3,14 12,14 11,22 21,10 12,10 13,2"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="flex space-x-8" style="border-bottom: 1px solid #e5e7eb; margin-bottom: 0rem; background: white; padding: 0 1.5rem; border-radius: 0.75rem 0.75rem 0 0;">
                <button class="tab-btn active" data-tab="workflows" style="position: relative; padding: 1rem 0.25rem; font-weight: 500; font-size: 0.875rem; transition: all 0.2s; background: none; border: none; cursor: pointer; color: #2563eb;">
                    Workflows
                    <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 2px; background: #2563eb; border-radius: 1px 1px 0 0;"></div>
                </button>
                <button class="tab-btn" data-tab="bills" style="position: relative; padding: 1rem 0.25rem; font-weight: 500; font-size: 0.875rem; transition: all 0.2s; color: #6b7280; background: none; border: none; cursor: pointer;">
                    Bills
                </button>
                <button class="tab-btn" data-tab="executions" style="position: relative; padding: 1rem 0.25rem; font-weight: 500; font-size: 0.875rem; transition: all 0.2s; color: #6b7280; background: none; border: none; cursor: pointer;">
                    Executions
                </button>
            </div>

            <!-- Tab Content -->
            <div id="tab-content" style="background: white; padding: 1.5rem; border-radius: 0 0 0.75rem 0.75rem; border: 1px solid #e5e7eb; border-top: none;">
                <!-- Workflows Tab -->
                <div id="workflows-content" class="tab-content active">
                    <div class="grid grid-cols-1 grid-cols-3" style="gap: 1.5rem;">
                        <div class="workflow-card" onclick="window.location.href='{% url 'mainapp:ai_builder' %}'" style="background: #f9fafb; padding: 2rem; border-radius: 0.75rem; text-align: center; cursor: pointer; transition: all 0.2s; border: 2px dashed #d1d5db;" onmouseover="this.style.borderColor='#2563eb'; this.style.backgroundColor='#eff6ff'" onmouseout="this.style.borderColor='#d1d5db'; this.style.backgroundColor='#f9fafb'">
                            <div class="icon-container" style="background: rgba(107, 114, 128, 0.1); padding: 1rem; border-radius: 0.75rem; margin: 0 auto 1rem auto; width: fit-content;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#6b7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                    <polyline points="14,2 14,8 20,8"/>
                                    <line x1="12" y1="18" x2="12" y2="12"/>
                                    <line x1="9" y1="15" x2="15" y2="15"/>
                                </svg>
                            </div>
                            <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Create New Workflow</h3>
                            <p style="font-size: 0.875rem; color: #6b7280;">Start building your automation from scratch with our visual editor</p>
                        </div>

                        <div class="workflow-card" onclick="window.location.href='{% url 'mainapp:templates' %}'" style="background: rgba(37, 99, 235, 0.05); padding: 2rem; border-radius: 0.75rem; text-align: center; cursor: pointer; transition: all 0.2s; border: 2px solid #e5e7eb;" onmouseover="this.style.borderColor='#2563eb'; this.style.backgroundColor='#eff6ff'" onmouseout="this.style.borderColor='#e5e7eb'; this.style.backgroundColor='rgba(37, 99, 235, 0.05)'">
                            <div class="icon-container" style="background: rgba(37, 99, 235, 0.1); padding: 1rem; border-radius: 0.75rem; margin: 0 auto 1rem auto; width: fit-content;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <path d="M8 8h8v8H8z"/>
                                    <path d="m8 8 8 8"/>
                                    <path d="m16 8-8 8"/>
                                </svg>
                            </div>
                            <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Use Template</h3>
                            <p style="font-size: 0.875rem; color: #6b7280;">Choose from our library of pre-built workflow templates</p>
                        </div>

                        <div class="workflow-card" onclick="window.location.href='{% url 'mainapp:create_workflow' %}'" style="background: rgba(139, 92, 246, 0.05); padding: 2rem; border-radius: 0.75rem; text-align: center; cursor: pointer; transition: all 0.2s; border: 2px solid #e5e7eb;" onmouseover="this.style.borderColor='#8b5cf6'; this.style.backgroundColor='#faf5ff'" onmouseout="this.style.borderColor='#e5e7eb'; this.style.backgroundColor='rgba(139, 92, 246, 0.05)'">
                            <div class="icon-container" style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 0.75rem; margin: 0 auto 1rem auto; width: fit-content;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                    <circle cx="12" cy="5" r="2"/>
                                    <path d="M12 7v4"/>
                                    <line x1="8" y1="16" x2="16" y2="16"/>
                                    <line x1="8" y1="20" x2="16" y2="20"/>
                                </svg>
                            </div>
                            <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Develope Mode</h3>
                            <p style="font-size: 0.875rem; color: #6b7280;">Build custom workflows based on your requirements</p>
                        </div>
                    </div>
                </div>

                <!-- Bills Tab -->
                <div id="bills-content" class="tab-content" style="display: none;">
                    <div style="text-align: center; padding: 4rem 2rem; color: #6b7280;">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 1rem auto; opacity: 0.5;">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <line x1="9" y1="9" x2="15" y2="9"/>
                            <line x1="9" y1="15" x2="15" y2="15"/>
                        </svg>
                        <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Bills Section</h3>
                        <p style="font-size: 0.875rem;">Bills management section will be available soon</p>
                    </div>
                </div>

                <!-- Executions Tab -->
                <div id="executions-content" class="tab-content" style="display: none;">
                    <div style="text-align: center; padding: 4rem 2rem; color: #6b7280;">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="margin: 0 auto 1rem auto; opacity: 0.5;">
                            <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
                        </svg>
                        <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Executions Section</h3>
                        <p style="font-size: 0.875rem;">Workflow executions history will be displayed here</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for Tab functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    tabBtns.forEach(tab => {
                        tab.classList.remove('active');
                        tab.style.color = '#6b7280';
                        const underline = tab.querySelector('div');
                        if (underline) {
                            underline.remove();
                        }
                    });
                    
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        content.style.display = 'none';
                    });
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    this.style.color = '#2563eb';
                    
                    // Add underline to active tab
                    const underline = document.createElement('div');
                    underline.style.cssText = 'position: absolute; bottom: 0; left: 0; right: 0; height: 2px; background: #2563eb; border-radius: 1px 1px 0 0;';
                    this.appendChild(underline);
                    
                    // Show corresponding content
                    const targetContent = document.getElementById(targetTab + '-content');
                    if (targetContent) {
                        targetContent.classList.add('active');
                        targetContent.style.display = 'block';
                    }
                });
            });

            // Dropdown functionality
            const createBtn = document.getElementById('createBtn');
            const createDropdown = document.getElementById('createDropdown');

            createBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                createDropdown.style.display = createDropdown.style.display === 'none' ? 'block' : 'none';
            });

            document.addEventListener('click', function() {
                createDropdown.style.display = 'none';
            });

            createDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });
    </script>

{% endblock content %}